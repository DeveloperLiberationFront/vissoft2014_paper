\documentclass{article}
\usepackage[margin=1in]{geometry}

\usepackage{listings}
\usepackage{upquote}
\usepackage{xcolor}
\usepackage{ulem}

\usepackage{zi4}

\usepackage{tikz}
\usetikzlibrary{arrows}
\usetikzlibrary{tikzmark}

\usepackage{ulem}

\makeatletter \def\redwave{\bgroup
  \markoverwith{\lower3.5\p@\hbox{\sixly
      \textcolor{red}{\char58}}}\ULon}
\font\sixly=lasy6 % does not re-load if already loaded, so no memory problem.
\makeatother

\pagestyle{empty}
\begin{document}

\lstdefinestyle{JavaSource}{
  basicstyle=\ttfamily,
  language=Java,
  showstringspaces=false,
  % numbers=left,
  moredelim=[is][\redwave]{|}{|},
  keepspaces=true,
  % frame=single,
}

\lstdefinestyle{JavaError}{
  basicstyle=\small\ttfamily,
}

\begin{lstlisting}[style=JavaSource]
1 class Melon {
2     |final int i|;
3 
4     Melon(boolean b) {
5         if (b)
6             i = 3;
7     }
8 }

\end{lstlisting}

\end{document}
